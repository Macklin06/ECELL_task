{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
  <h2>Welcome, {{ user.full_name }}</h2>
  <div class="row">
    <div class="col-md-6">
      <h4>Your Teams</h4>
      <ul class="list-group">
        {% for team in user.teams %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <a href="{{ url_for('views.team_view', team_id=team.id) }}">{{ team.name }}</a>
            <span class="badge bg-primary rounded-pill">{{ team.score.points if team.score else 0 }}</span>
          </li>
        {% else %}
          <li class="list-group-item">You are not part of any team yet.</li>
        {% endfor %}
      </ul>
      <a class="btn btn-primary mt-2" href="{{ url_for('views.create_team') }}">Create Team</a>
    </div>
    <div class="col-md-6">
      <h4>Announcements</h4>
      {% for ann in announcements[:5] %}
        <div class="card mb-2">
          <div class="card-body">
            <h6 class="card-title">{{ ann.title }}</h6>
            <p class="card-text">{{ ann.body }}</p>
            <small class="text-muted">{{ ann.created_at.strftime('%Y-%m-%d') }}</small>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
